---
title: What&#39;s New in v2.0-beta.20180226
toc: false
summary: Additions and changes in CockroachDB version v2.0-beta.20180226
---

## February 23, 2018

Get future release notes emailed to you:

<div class="hubspot-install-form install-form-1 clearfix">
    <script>
        hbspt.forms.create({
            css: '',
            cssClass: 'install-form',
            portalId: '1753393',
            formId: '39686297-81d2-45e7-a73f-55a596a8d5ff',
            formInstanceId: 1,
            target: '.install-form-1'
        });
    </script>
</div>

### Downloads

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180226.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180226.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180226.windows-6.2-amd64.zip"><button id="windows" data-eventcategory="windows-binary-release-notes">Windows</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180226.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

### Build Changes

- CockroachDB now builds with go 1.9.4 and higher. [#22608][#22608]

### General Changes

- Diagnostics reports now include information about changed settings. [#22705][#22705]
- Diagnostics reports now include information about the types of errors encountered during SQL execution. [#22693][#22693]
- Diagnostics reports now include statistics on types of errors encountered. [#22948][#22948]

### Enterprise Edition Changes

- Bulk IO rate limiting is now done per-store rather than per-node. [#22729][#22729]
- Revision history backup and restore no longer considered experimental. [#22679][#22679]
- CockroachDB now checks that backup actually contains requested restore time. [#22659][#22659]
- Improved `BACKUP`'s handling of tables after `TRUNCATE` [#21895][#21895]
- Removed `into_db` option in `IMPORT`. The database is now specified as part of the table name. [#21813][#21813]
- Ensured that only the backups created by the same cluster can be used in incremental backups. [#22474][#22474]
- Avoided extra internal copying of files during `RESTORE`/`IMPORT`. [#22281][#22281]
- Revision history backup/restore now handles schema changes. [#21717][#21717]
- Added a geographical map to the homepage of the Admin UI enterprise version, showing the location of nodes and localities in the cluster. The map is annotated with several top-level metrics: storage capacity used, queries per second, and current CPU usage, as well as the liveness status of nodes in the cluster. [#22763][#22763]

### SQL Language Changes

- CockroachDB now returns the correct error code for division by zero. [#22948][#22948]
- The GC of table data after a `DROP TABLE` now respects changes to the GC TTL interval specified in the zone config [#22903][#22903]
- The full names of tables/view/sequences are now properly logged in the system event log. [#22848][#22848]
- CockroachDB now recognizes the syntax `db.public.tbl` in addition to `db.tbl`, for better compatibility with PostgreSQL. The handling of the session variable `search_path`, as well as that of the built-in functions `current_schemas()` and `current_schema()`, is now closer to that of PostgreSQL. Thus `SHOW TABLES FROM` can now inspect the tables of a specific schema (for example, `SHOW TABLES FROM db.public` or `SHOW TABLES FROM db.pg_catalog`). `SHOW GRANTS` also shows the schema of the databases and tables. [#22753][#22753]
- Users can now configure auditing per table and per access mode with `ALTER TABLE`. [#22534][#22534]
- SQL execution logs enabled by the cluster setting `sql.trace.log_statement_execute` now go to a separate log file. This is an experimental feature meant to aid troubleshooting CockroachDB. [#22534][#22534]
- Added `string_to_array` builtin. [#22391][#22391]
- Added `constraint_column_usage` table to the information_schema. [#22323][#22323]
- Allowed tables with no primary key in `IMPORT` CSV. [#22542][#22542]
- Foreign Key Cascading actions can now also contain check constraints. [#22535][#22535]
- `IMPORT` no longer requires experimental setting. [#22531][#22531]
- Computed columns and `CHECK CONSTRAINTS` now correctly report column names in the case of a type error. [#22500][#22500]
- Made the output of JSON data match that of Postgres. [#22393][#22393]
- `IMPORT` CSV tables are now required to specify a primary key. [#22455][#22455]
- Allowed `IMPORT` jobs to be paused. `IMPORT` jobs now correctly resume instead of being abandoned if the coordinator goes down. [#22291][#22291]
- Changed computed column syntax and improved error messages. [#22429][#22429]
- Implemented additional `INET` column type operators such as `contains` and `contained by`, binary operations, and addition/subtraction.
- Implemented the following operators for `INET` column types: `<<`, `<<=`, `>>`, `>>=`, `&&`, `+`, `-`, `^`, `|`, `&`.  These operators are compatible with PostgreSQL 10 and are described in Table: 9.36 of the PostgreSQL documentation. [#21437][#21437]
- CockroachDB now properly rejects incorrectly cased SQL function names with an error. [#22365][#22365]
- Allowed `DEFAULT` expressions in the `CREATE TABLE` of `IMPORT`. The expressions are not evaluated (data in the CSV is still required to be present). This change only allows them to be part of the table definition. [#22307][#22307]
- Added the `#-` operator for JSON. [#22375][#22375]
- Supported the `set transaction_isolation` statement for Postgres compatibility. [#22389][#22389]
- Allowed creation of computed columns. [#21823][#21823]
- Added roles-related `information_schema` tables. [#22242][#22242]

### Command-Line Changes

- Replication zone constraints can now be specified on a per-replica basis, meaning you can configure some replicas in a zone's ranges to follow one set of constraints and other replicas to follow other constraints. [#22906][#22906]
- Positive constraints in replication zone configs no longer work. Any existing positive constraints will be ignored. [#22906][#22906]
- Improved error messages displayed while connecting to a server with an incompatible version. [#22709][#22709]
- The `--cache` and `--max-sql-memory` now also support decimal notation to support a fraction of total available RAM size, e.g. `--cache=.25` is equivalent to `--cache=25%`. This simplifies integration with system management tools. [#22460][#22460]
- Fixed bug in `cockroach dump` output with `SEQUENCES`. [#22619][#22619]
- When printing tabular results as CSV or TSV, no final row count is emitted. This is intended to increase interoperability with external tools. [#20835][#20835]
- The `pretty` formatter does not introduce special unicode characters in multi-line table cells, for better compatibility with certain clients. To disambiguate multi-line cells from multiple single-line cells, a user can use `WITH ORDINALITY` to add a row numbering column. [#22324][#22324]
- Allowed specification of arbitrary RocksDB options. [#22401][#22401]

### Admin UI Changes

- Decommissioned nodes are no longer included in cluster stats aggregates. [#22711][#22711]
- Time series metrics dashboards now show their own title rather than the generic "Cluster Overview". [#22746][#22746]
- The URLs for Admin UI pages have been reorganized to provide more consistent structure to the site.  Old links will redirect to the new location of the page. [#22746][#22746]
- Corrected the title of the decommissioned node list, which was mistakenly updated to say "Decommissioning". [#22703][#22703]
- Nodes being decommissioned are now included in the total nodes count until they are completely decommissioned. [#22690][#22690]
- Added new graphs for monitoring activity of the time series system. [#22672][#22672]
- Fixed an issue where graph tooltips would continue to display zero values for nodes which had long been decommissioned. [#22626][#22626]
- Fixed an issue where Admin UI graphs would occasionally have a persistent "dip" at the leading edge of data. [#22570][#22570]
- Fixed an issue where viewing graphs in the Admin UI for very long time spans (e.g. 1 Month) could cause excessive memory usage. [#22392][#22392]
- Disk usage for time series data is now visible on the Admin UI Databases page. [#22398][#22398]
- Added a ui-clean task. [#22552][#22552]

### Bug Fixes

- Fixed a bug where ranges could get stuck in an infinite "removal pending" state and would refuse to accept new writes. [#23024][#23024]
- Fixed incorrect index constraints on primary key columns on unique indexes (there was a possibility of returning fewer results, though unclear if it can happen in practice). [#23003][#23003]
- Fixed a panic when upgrading from quickly from 1.0.x to 2.0.x [#22971][#22971]
- Fixed a bug that prevented joins on interleaved tables with certain layouts from working. [#22935][#22935]
- The service latency tracked for SQL statement now includes the wait time of the execute message in the input queue. [#22881][#22881]
- The conversion from `INTERVAL` to `FLOAT` now properly returns the number of seconds in the interval. [#22894][#22894]
- Fixed incorrect query results when the `WHERE` condition contains IN expressions where the right-hand side tuple contains `NULL`s. [#22735][#22735]
- Fixed incorrect handling for `IS (NOT) DISTINCT FROM` when either side is a tuple that contains NULL. [#22718][#22718]
- Fixed incorrect evaluation of `IN` expressions where the left-hand side is a tuple, and some of the tuples on either side contain `NULL`. [#22718][#22718]
- Expressions stored in check constraints and computed columns are now stored dequalified so that they no longer refer to a specific database or table. [#22667][#22667]
- Fixed a bug where reusing addresses of decommissioned nodes could cause issues with graphs. [#22614][#22614]
- `IMPORT` jobs can no longer be started if the target table already exists. [#22627][#22627]
- Computed columns can no longer be added to a table after table creation. [#22653][#22653]
- Allowed `UPSERT`ing into a table with computed columns. [#22517][#22517]
- Computed columns are now correctly disallowed from being foreign-key references. [#22511][#22511]
- Various primitives that expect table names as argument now properly reject invalid table names. [#22577][#22577]
- `AddSSTable` no longer accidentally destroys files in the log on success. [#22551][#22551]
- `IsDistinctFrom` with `NULL` placeholder no longer returns incorrect results. [#22433][#22433]
- Fixed a bug that caused incorrect results for joins where columns that are constrained to be equal have different types. [#22549][#22549]
- Implemented additional safeguards against RPC connections between nodes that belong to different clusters. [#22518][#22518]
- Health endpoint now returns a node as unhealthy when draining or decommissioning. [#22502][#22502]
- Return the correct results for aggregates that take null arguments. [#22507][#22507]
- Fixed empty plan columns of `sequenceSelectNode`. [#22495][#22495]
- Disallowed any inserts into computed columns. [#22470][#22470]
- Tables with computed columns will produce a meaningful dump. [#22402][#22402]
- `cockroach sql` does not produce an error anymore when the empty statement is entered at the interactive prompt. [#22449][#22449]
- `pg_typeof` now returns the correct type for the output of `UNION ALL` even when the left sub-select has a `NULL` column. [#22438][#22438]
- `<TYPE> <value>` literal casts now work correctly for all fixed-length types. [#22397][#22397]
- Improved cluster's ability to continue operating when nearly out of disk space on most nodes. [#21866][#21866]
- Free up disk space more aggressively when the disk is almost full. [#22235][#22235]

### Performance Improvements

- Experimentally enable some joins to perform a lookup join and increase join speed for cases where right side of join is much larger than the left. [#22674][#22674]
- Supported distributed execution of `INTERSECT` and `EXCEPT` queries. [#22442][#22442]
- Reduced cancellation time of DistSQL aggregation queries. [#22684][#22684]
- Unnecessary value checksums are no longer computed, speeding up database writes. [#22487][#22487]
- Reduced unnecessary logging in the storage layer. [#22516][#22516]
- Performance improvement for distributed sql queries. [#22471][#22471]
- Supported distributed execution of `INTERSECT ALL` and `EXCEPT ALL` queries. [#21896][#21896]
- Fixed bugs when running DistSQL queries across mixed-version (1.1.x and 2.0-alpha) clusters. [#22897][#22897]
- Allowed `-` in usernames, but not as the first character. [#22728][#22728]
- A `COMMIT` reporting an error generated by a previous parallel (i.e. `RETURNING NOTHING`) statement no longer leaves the connection in an aborted transaction state. Instead, the transaction is considered completed and a `ROLLBACK` is not necessary. [#22683][#22683]

### Doc Updates

Docs team: Please add these manually.

### Contributors

This release includes 263 merged PRs by 35 authors. We would like to thank the following contributors from the CockroachDB community, with special thanks to first-time contributors Noonan and Mark Wistrom.

[#20790]: https://github.com/cockroachdb/cockroach/pull/20790
[#20835]: https://github.com/cockroachdb/cockroach/pull/20835
[#21437]: https://github.com/cockroachdb/cockroach/pull/21437
[#21477]: https://github.com/cockroachdb/cockroach/pull/21477
[#21717]: https://github.com/cockroachdb/cockroach/pull/21717
[#21813]: https://github.com/cockroachdb/cockroach/pull/21813
[#21823]: https://github.com/cockroachdb/cockroach/pull/21823
[#21866]: https://github.com/cockroachdb/cockroach/pull/21866
[#21895]: https://github.com/cockroachdb/cockroach/pull/21895
[#21896]: https://github.com/cockroachdb/cockroach/pull/21896
[#22235]: https://github.com/cockroachdb/cockroach/pull/22235
[#22242]: https://github.com/cockroachdb/cockroach/pull/22242
[#22281]: https://github.com/cockroachdb/cockroach/pull/22281
[#22291]: https://github.com/cockroachdb/cockroach/pull/22291
[#22307]: https://github.com/cockroachdb/cockroach/pull/22307
[#22323]: https://github.com/cockroachdb/cockroach/pull/22323
[#22324]: https://github.com/cockroachdb/cockroach/pull/22324
[#22365]: https://github.com/cockroachdb/cockroach/pull/22365
[#22375]: https://github.com/cockroachdb/cockroach/pull/22375
[#22389]: https://github.com/cockroachdb/cockroach/pull/22389
[#22391]: https://github.com/cockroachdb/cockroach/pull/22391
[#22392]: https://github.com/cockroachdb/cockroach/pull/22392
[#22393]: https://github.com/cockroachdb/cockroach/pull/22393
[#22397]: https://github.com/cockroachdb/cockroach/pull/22397
[#22398]: https://github.com/cockroachdb/cockroach/pull/22398
[#22401]: https://github.com/cockroachdb/cockroach/pull/22401
[#22402]: https://github.com/cockroachdb/cockroach/pull/22402
[#22404]: https://github.com/cockroachdb/cockroach/pull/22404
[#22416]: https://github.com/cockroachdb/cockroach/pull/22416
[#22429]: https://github.com/cockroachdb/cockroach/pull/22429
[#22433]: https://github.com/cockroachdb/cockroach/pull/22433
[#22438]: https://github.com/cockroachdb/cockroach/pull/22438
[#22442]: https://github.com/cockroachdb/cockroach/pull/22442
[#22449]: https://github.com/cockroachdb/cockroach/pull/22449
[#22455]: https://github.com/cockroachdb/cockroach/pull/22455
[#22460]: https://github.com/cockroachdb/cockroach/pull/22460
[#22470]: https://github.com/cockroachdb/cockroach/pull/22470
[#22471]: https://github.com/cockroachdb/cockroach/pull/22471
[#22474]: https://github.com/cockroachdb/cockroach/pull/22474
[#22487]: https://github.com/cockroachdb/cockroach/pull/22487
[#22495]: https://github.com/cockroachdb/cockroach/pull/22495
[#22500]: https://github.com/cockroachdb/cockroach/pull/22500
[#22502]: https://github.com/cockroachdb/cockroach/pull/22502
[#22507]: https://github.com/cockroachdb/cockroach/pull/22507
[#22511]: https://github.com/cockroachdb/cockroach/pull/22511
[#22514]: https://github.com/cockroachdb/cockroach/pull/22514
[#22516]: https://github.com/cockroachdb/cockroach/pull/22516
[#22517]: https://github.com/cockroachdb/cockroach/pull/22517
[#22518]: https://github.com/cockroachdb/cockroach/pull/22518
[#22531]: https://github.com/cockroachdb/cockroach/pull/22531
[#22534]: https://github.com/cockroachdb/cockroach/pull/22534
[#22535]: https://github.com/cockroachdb/cockroach/pull/22535
[#22542]: https://github.com/cockroachdb/cockroach/pull/22542
[#22549]: https://github.com/cockroachdb/cockroach/pull/22549
[#22551]: https://github.com/cockroachdb/cockroach/pull/22551
[#22552]: https://github.com/cockroachdb/cockroach/pull/22552
[#22570]: https://github.com/cockroachdb/cockroach/pull/22570
[#22577]: https://github.com/cockroachdb/cockroach/pull/22577
[#22601]: https://github.com/cockroachdb/cockroach/pull/22601
[#22608]: https://github.com/cockroachdb/cockroach/pull/22608
[#22614]: https://github.com/cockroachdb/cockroach/pull/22614
[#22619]: https://github.com/cockroachdb/cockroach/pull/22619
[#22620]: https://github.com/cockroachdb/cockroach/pull/22620
[#22626]: https://github.com/cockroachdb/cockroach/pull/22626
[#22627]: https://github.com/cockroachdb/cockroach/pull/22627
[#22637]: https://github.com/cockroachdb/cockroach/pull/22637
[#22648]: https://github.com/cockroachdb/cockroach/pull/22648
[#22653]: https://github.com/cockroachdb/cockroach/pull/22653
[#22658]: https://github.com/cockroachdb/cockroach/pull/22658
[#22659]: https://github.com/cockroachdb/cockroach/pull/22659
[#22667]: https://github.com/cockroachdb/cockroach/pull/22667
[#22672]: https://github.com/cockroachdb/cockroach/pull/22672
[#22674]: https://github.com/cockroachdb/cockroach/pull/22674
[#22679]: https://github.com/cockroachdb/cockroach/pull/22679
[#22683]: https://github.com/cockroachdb/cockroach/pull/22683
[#22684]: https://github.com/cockroachdb/cockroach/pull/22684
[#22690]: https://github.com/cockroachdb/cockroach/pull/22690
[#22693]: https://github.com/cockroachdb/cockroach/pull/22693
[#22703]: https://github.com/cockroachdb/cockroach/pull/22703
[#22705]: https://github.com/cockroachdb/cockroach/pull/22705
[#22709]: https://github.com/cockroachdb/cockroach/pull/22709
[#22711]: https://github.com/cockroachdb/cockroach/pull/22711
[#22718]: https://github.com/cockroachdb/cockroach/pull/22718
[#22728]: https://github.com/cockroachdb/cockroach/pull/22728
[#22729]: https://github.com/cockroachdb/cockroach/pull/22729
[#22735]: https://github.com/cockroachdb/cockroach/pull/22735
[#22746]: https://github.com/cockroachdb/cockroach/pull/22746
[#22753]: https://github.com/cockroachdb/cockroach/pull/22753
[#22763]: https://github.com/cockroachdb/cockroach/pull/22763
[#22848]: https://github.com/cockroachdb/cockroach/pull/22848
[#22881]: https://github.com/cockroachdb/cockroach/pull/22881
[#22894]: https://github.com/cockroachdb/cockroach/pull/22894
[#22897]: https://github.com/cockroachdb/cockroach/pull/22897
[#22903]: https://github.com/cockroachdb/cockroach/pull/22903
[#22906]: https://github.com/cockroachdb/cockroach/pull/22906
[#22935]: https://github.com/cockroachdb/cockroach/pull/22935
[#22948]: https://github.com/cockroachdb/cockroach/pull/22948
[#22971]: https://github.com/cockroachdb/cockroach/pull/22971
[#22983]: https://github.com/cockroachdb/cockroach/pull/22983
[#23003]: https://github.com/cockroachdb/cockroach/pull/23003
[#23019]: https://github.com/cockroachdb/cockroach/pull/23019
[#23024]: https://github.com/cockroachdb/cockroach/pull/23024
[04ac51acf]: https://github.com/cockroachdb/cockroach/commit/04ac51acf
[78e0043a0]: https://github.com/cockroachdb/cockroach/commit/78e0043a0
[9b20d8aa1]: https://github.com/cockroachdb/cockroach/commit/9b20d8aa1
[6a032314f]: https://github.com/cockroachdb/cockroach/commit/6a032314f
[23a12ac35]: https://github.com/cockroachdb/cockroach/commit/23a12ac35
[bf6945995]: https://github.com/cockroachdb/cockroach/commit/bf6945995
[83866baa6]: https://github.com/cockroachdb/cockroach/commit/83866baa6
[1879e7e95]: https://github.com/cockroachdb/cockroach/commit/1879e7e95
[00f9680e6]: https://github.com/cockroachdb/cockroach/commit/00f9680e6
[948870a5d]: https://github.com/cockroachdb/cockroach/commit/948870a5d
[e4b2a1ca0]: https://github.com/cockroachdb/cockroach/commit/e4b2a1ca0
[9bd470db7]: https://github.com/cockroachdb/cockroach/commit/9bd470db7
[61331072c]: https://github.com/cockroachdb/cockroach/commit/61331072c
[322f3aa2d]: https://github.com/cockroachdb/cockroach/commit/322f3aa2d

